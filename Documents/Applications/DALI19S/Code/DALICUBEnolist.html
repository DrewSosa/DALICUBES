<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8>
    <title>DALICUBES</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>

<body>
    <button onclick="switchCubes()" type="button">SwitchCubes</button>
    <!-- <button onclick="scene2" type="button">SwitchScenes</button> -->
    <script src="jquery-3.4.1.js"></script>
    <script src="js/three.js"></script>
    <script>
        scenes = [];
        $(":button").click(function () {
            switchCubes();
            console.log("Hello world!");
        })
        // $("#scene1").click(function () {
        //     scene = scene1
        // })
        function switchCubes(counter) {
            $.ajaxSetup({
                async: false
            });
            console.log(counter);
            //set the scene.
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            var employees;
            //JSON LINK

            var daliMembers = "https://raw.githubusercontent.com/dali-lab/dali-challenges/master/data/DALI_Data.json";

            //JSON LINK
            var DALI = $.getJSON(daliMembers, function (data) {
                employees = data;
                // console.log(data);
            }
            );
            console.log(employees);
            console.log(counter);
            console.log(employees[counter]);
            console.log(employees[counter].picture);

            // console.log(employees);

            //lets assume each JSON object have the variables name, role, picurl, song link, class year

            var i;
            for (i = 0; i < 1; i++) {
            var employ_cube = new THREE.Mesh(
                new THREE.BoxGeometry(200, 200, 200),
                new THREE.MeshBasicMaterial({
                    map: new THREE.TextureLoader().load(employees[counter].picture)
                })
            );
            employ_cube.material.side = THREE.DoubleSide;


            scene.add(employ_cube);

            var loader = new THREE.FontLoader();
            loader.load('fonts/helvetiker_bold.typeface.json', function (font) {

                var textGeometry = new THREE.TextGeometry(employees[counter].year, {

                    font: font,

                    size: 5,
                    height: 4,
                    curveSegments: 11,

                    bevelThickness: 0.5,
                    bevelSize: 0.5,
                    bevelEnabled: false

                });

                var textMaterial = new THREE.MeshPhongMaterial(
                    { color: 0xff0000, specular: 0x100FF }
                );


                var textGeometry2 = new THREE.TextGeometry(employees[counter].role, {

                    font: font,

                    size: 5,
                    height: 4,
                    curveSegments: 11,

                    bevelThickness: 0.5,
                    bevelSize: 0.5,
                    bevelEnabled: false

                });
                textGeometry.translate(-11, -10, -25);
                textGeometry2.translate(-11, -5, -27);

                var mesh = new THREE.Mesh(textGeometry, textMaterial);
                var mesh2 = new THREE.Mesh(textGeometry2, textMaterial);
                // mesh.rotation.x =  (2 *Math.PI) / 3;
                mesh.name = "mesh";
                scene.add(mesh);
                scene.add(mesh2);


            });


            //practice stuff

            camera.position.z = 20;
            const pointLight = new THREE.PointLight(0xffffff, 1.5); pointLight.position.set(0, 0, 0);
            scene.add(pointLight);
            pointLight.color.setHSL(Math.random(), 1, 0.5);
            function animate() {
                requestAnimationFrame(animate);
                employ_cube.rotation.x += 0.01;
                employ_cube.rotation.y += 0.01;
                pointLight.rotation.x += 0.01;
                pointLight.rotation.y += 0.01;
                // dice2.rotation.x += 0.01;
                // dice2.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();

        }
        }




    </script>
</body>

</html>